"""
https://index.baidu.com/v2/main/index.html#/trend/python?words=python
"""

import requests


def decrypt(t, e):
    if not t:
        return ""

    # 将字符串拆分为字符列表
    i = list(t)
    n = list(e)

    # 创建字符映射字典
    a = {}
    for A in range(len(i) // 2):
        a[i[A]] = i[len(i) // 2 + A]

    # 根据映射关系解密字符串
    r = []
    for char in n:
        if char in a:
            r.append(a[char])
        else:
            r.append(char)  # 如果字符不在映射中，保留原字符（可选）

    return ''.join(r)


url = "https://index.baidu.com/api/SearchApi/index?area=0&word=[[%7B%22name%22:%22python%22,%22wordType%22:1%7D]]&days=30"

headers = {
    'Cipher-Text': '1737626663709_1737700674014_JtjUsoFwepS8PiVpiMhsThUGqHjf7ujOmN/V0Nc712eX4BDOr35W03bWptYQohNaTk1H7wzQKFRDqh9h2jcyUXJqrrxRHK8KmVq6zDHbTGZc2mz2h57tUZQvYdivhHP3nGLcRyq5ygcDcyyMKlV0KbGAOCAZJyqz/bDJ0NRplu8JAFy8NQ9PIn/SpkbgdsEaimnmFGcBAvGtQ9kLr+4DxcSqpVq/iyoSUe6qPVnnINqw0lpgvzR592vcga/0umeclipv0OEqL5Fo+5o+iFHLn/lfa2PZv2VVHXjhsHENdFDnUSFncCs2LNNvVQeJuN1IhQ40PugWv7WZjo8Tu+vqqI3IzN7qJbSoGWp4cmyrprWG1MeDS/UT7LEH4U9Zejji',
    'Cookie': 'BIDUPSID=C45E344D3881B01A58E21ECE62C749BE; PSTM=1729330083; BAIDUID=C45E344D3881B01A211AC87C6E0899A2:FG=1; BDSFRCVID=-GPOJeC62iBv17oJQMeShfDgxI1nuARTH6aotD7FpDAgAx6T5UQmEG0PCf8g0KAhzW-bogKKL2OTHmuF_2uxOjjg8UtVJeC6EG0Ptf8g0x5; H_BDCLCKID_SF=tbC8VCDKJKD3H48k-4QEbbQH-UnLq-5A02OZ04n-ah05SUL6jf6dMU0vMMjRKbvbBDrP0Pom3UTKsq76Wh35K5tTQP6rLqcbQtj4KKJxbP8aKJbH5tK-M6JQhUJiBMAHBan7W45IXKohJh7FM4tW3J0ZyxomtfQxtNRJ0DnjtpChbC8lejuaj6bLep3K2D6aKC5bL6rJabC3qpvDXU6q2bDeQNbULj-tWeJqQtOS5qbJJbb8-lofKl0vWq54afb2tacJXfOTylR4oJbKqfonDh83KNLLKUQtKJcBoKJO5hvv8KoO3M7V5fKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ5_8fRCq_KDQKt8_HRjYbb__-P4Den6rtURZ56bHWh0bQMLbMqcs5R5nM-Kvbp7bWtjP5TrnKUT-3l7boMJRK5bdQUIT3RrbLDr43bRTLP8hHRbpfJ_CM6-2hP-UyPkHWh37a6TlMKoaMp78jR093JO4y4Ldj4oxJpOJ5JbMopCafD8abKKme50-entebl8HetoQ5IT-06rJabC38f5oXU6qLT5X5PALafPqWeJqQPoS5qbJJMbL0URS3h0njxQyKtRL3mJq3qOS3l6tjn6xDMonDh8QbG7MJUntKDjMQC3O5hvv8KoO3M7V5fKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQbG_Et6kOtJAfoKPQ-b7tf-3pK4__KP4E5MQjetJXf-jxbp7F5l8-hRTt56LbhUIuXfogaP5R55bAoRra0xoxOKQphnOUjUKQQ-QM3RkqQnTPbR6N3KJmEnL9bT3vLtkh3gca2-biW2tH2Mbda45P_IoG2Mn8M4bb3qOpBtQmJeTxoUJ25DnJh-PGe4bK-Tr0jH8jqx5; BDUSS=NhemZFOHhHTFZuODFHcTU2bm9uOVNYYmE3LVZTN1BGdUNkbm03MWZqS1g1bk5uSVFBQUFBJCQAAAAAAAAAAAEAAACIH7Q2emgyM2pfZW11MgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJdZTGeXWUxneE; MCITY=-%3A; MAWEBCUID=web_TadEBUpLaOtxZXltrcziXwGApACnNJNDuxMkoKGNHFnEefRpnD; BAIDUID_BFESS=C45E344D3881B01A211AC87C6E0899A2:FG=1; BDSFRCVID_BFESS=-GPOJeC62iBv17oJQMeShfDgxI1nuARTH6aotD7FpDAgAx6T5UQmEG0PCf8g0KAhzW-bogKKL2OTHmuF_2uxOjjg8UtVJeC6EG0Ptf8g0x5; H_BDCLCKID_SF_BFESS=tbC8VCDKJKD3H48k-4QEbbQH-UnLq-5A02OZ04n-ah05SUL6jf6dMU0vMMjRKbvbBDrP0Pom3UTKsq76Wh35K5tTQP6rLqcbQtj4KKJxbP8aKJbH5tK-M6JQhUJiBMAHBan7W45IXKohJh7FM4tW3J0ZyxomtfQxtNRJ0DnjtpChbC8lejuaj6bLep3K2D6aKC5bL6rJabC3qpvDXU6q2bDeQNbULj-tWeJqQtOS5qbJJbb8-lofKl0vWq54afb2tacJXfOTylR4oJbKqfonDh83KNLLKUQtKJcBoKJO5hvv8KoO3M7V5fKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ5_8fRCq_KDQKt8_HRjYbb__-P4Den6rtURZ56bHWh0bQMLbMqcs5R5nM-Kvbp7bWtjP5TrnKUT-3l7boMJRK5bdQUIT3RrbLDr43bRTLP8hHRbpfJ_CM6-2hP-UyPkHWh37a6TlMKoaMp78jR093JO4y4Ldj4oxJpOJ5JbMopCafD8abKKme50-entebl8HetoQ5IT-06rJabC38f5oXU6qLT5X5PALafPqWeJqQPoS5qbJJMbL0URS3h0njxQyKtRL3mJq3qOS3l6tjn6xDMonDh8QbG7MJUntKDjMQC3O5hvv8KoO3M7V5fKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQbG_Et6kOtJAfoKPQ-b7tf-3pK4__KP4E5MQjetJXf-jxbp7F5l8-hRTt56LbhUIuXfogaP5R55bAoRra0xoxOKQphnOUjUKQQ-QM3RkqQnTPbR6N3KJmEnL9bT3vLtkh3gca2-biW2tH2Mbda45P_IoG2Mn8M4bb3qOpBtQmJeTxoUJ25DnJh-PGe4bK-Tr0jH8jqx5; delPer=0; ZFY=20YVulWfmsRMebhzSMp5EQr1etzb:BI1GxWCT1YyU5:AU:C; BDRCVFR[dDFRJWj44Gm]=I67x6TjHwwYf0; BDRCVFR[k-3xBxsWSJs]=mk3SLVN4HKm; H_WISE_SIDS_BFESS=61027_60853_61693_61735_61780_61815_61890_61986; BA_HECTOR=812h2k018k2481a18ha42k2ga0nnvr1jp3un11u; BDORZ=FFFB88E999055A3F8A630C64834BD6D0; PSINO=5; H_WISE_SIDS=61027_61693_61735_61780_61815_61890_61986_62010; H_PS_PSSID=61027_61693_61735_61780_61890_61986_62010; Hm_lvt_d101ea4d2a5c67dab98251f0b5de24dc=1737699497; HMACCOUNT=6F7DCF1B0993F072; SIGNIN_UC=70a2711cf1d3d9b1a82d2f87d633bd8a04877119466joW4M%2BK%2B87tJDMTnrA2rlIoIBwozMpwjCJfZGM5mwo1sjywDvTo4Mb60MQeX91rBWCwPz6pAxLV%2BtbZBrB7MoFhMyTtoDViHbb2DJIWb0b5iw4c1GIl4XBi7sN7omwX8S54FfdynbU7ORotzRfJige%2FO9Hllux2W7AXI0ZKS6cXu9xq8cWAw3qBvYD%2BWAuqFjeU315RQBIHW63SGy7xQN2kM55Zce0dc%2F%2FYkzDqpcQkxIh2ekRqTOEqjrpro0A3qrLrfulxQzE7xGopuvKis%2Fw%3D%3D71504883484214293980992911436793; __cas__rn__=487711946; __cas__st__212=f2f3222ccd74e9bebb25e90b6283fed768a2442b28468a9f254e6b68f51e7b7180326a10320a039fc12b9cea; __cas__id__212=63300661; CPTK_212=827828487; CPID_212=63300661; bdindexid=0hgrej6c5jnrkal0jh6f9bj494; ab_sr=1.0.1_MzA0MWQyYTQ4OTA5YWJkNmM1ZTQxZGY2NDAxMjQwOGJiYjI0MGEzZTAzZWU3YzQ2NzgyNDFmMGM1OWYyZGFjZDU2NjlmNDViN2JkMjgyNDg1MjFhN2FiNzk1NThjNjEyODJmMjU2MzZmNDE5YTlmNmY5MjYzNmRjOTU1MTZmMzM1MTM3ZDVjNjRlODE3NDJlZTM0Yzg3NjA1YzcwMGU3YzY3NGFiNGQ0MzQ2ZmE0OTRhMmE4YTEyMWNiMDZkM2I4OTEyMGZhYmE1YzViMmMxNzRhNjdkNWUyMzkzYzUwOTA=; Hm_lpvt_d101ea4d2a5c67dab98251f0b5de24dc=1737700673; RT="z=1&dm=baidu.com&si=917a2387-fc59-4cb9-b57b-8053a42757ad&ss=m6adeuxk&sl=4&tt=aqi&bcn=https%3A%2F%2Ffclog.baidu.com%2Flog%2Fweirwood%3Ftype%3Dperf"; BDUSS_BFESS=NhemZFOHhHTFZuODFHcTU2bm9uOVNYYmE3LVZTN1BGdUNkbm03MWZqS1g1bk5uSVFBQUFBJCQAAAAAAAAAAAEAAACIH7Q2emgyM2pfZW11MgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJdZTGeXWUxneE; BAIDUID=63D870980917BC2ACB8C020A3D169491:FG=1; BAIDUID_BFESS=63D870980917BC2ACB8C020A3D169491:FG=1'
}

with requests.get(url, headers=headers) as r:
    result = r.json()

# uniqid和all_data会随着时间变化, 但是不影响解密
uniqid = result['data']['uniqid']
all_data = result['data']['userIndexes'][0]['all']['data']

t_url = f'https://index.baidu.com/Interface/ptbk?uniqid={uniqid}'

with requests.get(t_url, headers=headers) as r:
    t = sub_result = r.json()['data']

print(decrypt(t, all_data))
